query QueryModels($projectId: ID!, $environment: String!) {
  viewer {
    id
    project(id: $projectId) {
      environment(name: $environment) {
        id
        name
        displayName
        contentModel {
          models(includeSystemModels: false) {
            id
            apiId
            apiIdPlural
            displayName
            isSystem
            fields(includeApiOnlyFields: false, includeHiddenFields: false) {
              ...fields
            }
          }
          components(includeSystemComponents: false) {
            id
            apiId
            apiIdPlural
            displayName
            isSystem
            fields(includeApiOnlyFields: true, includeHiddenFields: false) {
              ...fields
            }
          }
          enumerations {
            id
            apiId
            displayName
            values {
              id
              apiId
              displayName
            }
            isSystem
          }
        }
        contentViews {
          id
          type
          model {
            apiId
          }
          name
        }
        appInstallations {
          id
          fields {
            id
            displayName
          }
          app {
            apiId
            name
            elements {
              id
              apiId
            }
          }
        }
      }
    }
  }
}

fragment fields on IField {
  id
  apiId
  isSystem
  isList
  displayName
  parent {
    apiId
    displayName
  }
  ... on ComponentUnionField {
    apiId
    cutype: type
    components {
      apiId
    }
  }
  ... on UnionField {
    apiId
    displayName
    union {
      memberTypes {
        parent {
          apiId
        }
      }
    }
    utype: type
  }
  ... on ComponentField {
    apiId
    ctype: type
    component {
      apiId
    }
  }
  ... on UniDirectionalRelationalField {
    apiId
    udrtype: type
  }
  ... on RelationalField {
    apiId
    rtype: type
    relatedField {
      apiId
      displayName
    }
  }
  ... on EnumerableField {
    apiId
    etype: type
  }
  ... on SimpleField {
    apiId
    stype: type
    isLocalized
    formConfig {
      id
      renderer
      config
      extension {
        id
        name
        apiId
      }
      appElement {
        id
        name
        apiId
        config
        src
        features
      }
    }
    tableConfig {
      id
      renderer
    }
  }
  ... on RemoteField {
    apiId
  }
  isSystem
}
